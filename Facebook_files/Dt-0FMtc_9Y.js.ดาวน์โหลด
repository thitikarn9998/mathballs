if (self.CavalryLogger) { CavalryLogger.start_js(["6qJ98"]); }

__d("InstagramAdsPreview",["cssVar","csx","cx","CSS","DOMDimensions","DOMQuery","Event","Style"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j={truncateCaption:function(a,c,d,e,f){__p&&__p();var g=[],h,i=!1;c=parseInt("15px",c);Array.from(a.children).forEach(function(a){Array.from(a.children).forEach(function(a){g.push(a)})});var j=g[g.length-1],k=-1,l=e!=void 0&&f!=void 0;for(var m=0;m<g.length-1;m++){b("CSS").removeClass(g[m],"_50f0");var n=g[m].textContent;if(l&&b("DOMDimensions").getElementDimensions(f).width>e&&n!=void 0){m>=2&&k<m-2&&(n="\n"+n);m<g.length-2&&(n+="\n");k=m;b("Style").set(g[m],"word-break","break-all");g[m].innerText=n;h=b("DOMDimensions").getElementDimensions(a).height;if(h/c>d){i=!0;b("CSS").removeClass(j,"_50f0");var o=n.length;while(h/c>d&&o>=0)g[m].textContent=n.substring(0,o),h=b("DOMDimensions").getElementDimensions(a).height,o--;break}}else{h=b("DOMDimensions").getElementDimensions(a).height;if(h/c>d){i=!0;b("CSS").removeClass(j,"_50f0");while(h/c>d&&m>=0)b("CSS").addClass(g[m],"_50f0"),h=b("DOMDimensions").getElementDimensions(a).height,m--;break}}}b("CSS").removeClass(a,"_50f1");return i},setDynamicTextSizeForCaption:function(a,b,c,d,e,f){while(e-f>1){var g=Math.floor(f+(e-f)/2);j.setTextFontSizeForCaption(a,g);j.didElementDimensionOverflow(a,b,c,d,parseFloat(window.getComputedStyle(a,null).getPropertyValue("line-height")))?e=g:f=g}j.setTextFontSizeForCaption(a,e);if(!j.didElementDimensionOverflow(a,b,c,d,parseFloat(window.getComputedStyle(a,null).getPropertyValue("line-height"))))return;j.setTextFontSizeForCaption(a,f)},setTextFontSizeForCaption:function(a,c){b("Style").set(a,"font-size",c+"px")},didElementDimensionOverflow:function(a,c,d,e,f){a=b("DOMDimensions").getElementDimensions(a);return a.height>c||a.width>d||a.height/f>e},subscribeFocusEvent:function(a,c){__p&&__p();var d=b("DOMQuery").scry(a,"._2ru6");if(d.length!==1)return;d=d[0];var e=!1,f="_2ru4",g="_2ru5",h=b("DOMQuery").find(a,"._2ru5"),i=function(){if(e)return;var a=b("DOMQuery").find(h,"._2ru7");e=!0;b("CSS").removeClass(h,g);b("CSS").addClass(h,f);a.hasAttribute("src")&&a.setAttribute("src",c.focusImageSrc)},j=function(){if(!e)return;var a=b("DOMQuery").find(h,"._2ru7");e=!1;b("CSS").removeClass(h,f);b("CSS").addClass(h,g);a.hasAttribute("src")&&a.setAttribute("src",c.unfocusImageSrc)},k=function(a){return a instanceof HTMLVideoElement?!1:a instanceof HTMLImageElement};b("Event").listen(d,"click",function(a){k(a.srcElement)&&i()});b("Event").listen(document,"click",function(b){a.contains(b.target)||j()})},subscribeToggleEvent:function(a){var c=!1,d=b("DOMQuery").scry(a,".img");b("Event").listen(a,"click",function(a){c=!c;for(var a=0;a<d.length;a++)b("CSS").toggle(d[a])})},isDescendant:function(a,b,c){c=c||1;b=b.parentNode;while(c&&b){if(a==b)return!0;b=b.parentNode;c--}return!1},tokenizeCaption:function(a){__p&&__p();a=a.split(l).filter(function(a){return a!=null&&a!==""});var b=[];a.forEach(function(a){if(!a.startsWith("@")&&!a.startsWith("#")){var c=a.split(k).filter(function(a){return a!=null&&a!==""});c.forEach(function(a){return b.push(a)})}else b.push(a)});return b}},k=/((?:[0-9\xB2\xB3\xB9\xBC-\xBE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D58-\u0D5E\u0D66-\u0D78\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]|\uD800[\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDEE1-\uDEFB\uDF20-\uDF23\uDF41\uDF4A\uDFD1-\uDFD5]|\uD801[\uDCA0-\uDCA9]|\uD802[\uDC58-\uDC5F\uDC79-\uDC7F\uDCA7-\uDCAF\uDCFB-\uDCFF\uDD16-\uDD1B\uDDBC\uDDBD\uDDC0-\uDDCF\uDDD2-\uDDFF\uDE40-\uDE48\uDE7D\uDE7E\uDE9D-\uDE9F\uDEEB-\uDEEF\uDF58-\uDF5F\uDF78-\uDF7F\uDFA9-\uDFAF]|\uD803[\uDCFA-\uDCFF\uDD30-\uDD39\uDE60-\uDE7E\uDF1D-\uDF26\uDF51-\uDF54]|\uD804[\uDC52-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDDE1-\uDDF4\uDEF0-\uDEF9]|\uD805[\uDC50-\uDC59\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9\uDF30-\uDF3B]|\uD807[\uDC50-\uDC6C\uDD50-\uDD59\uDDA0-\uDDA9\uDFC0-\uDFD4]|\uD809[\uDC00-\uDC6E]|\uD81A[\uDE60-\uDE69\uDF50-\uDF59\uDF5B-\uDF61]|\uD81B[\uDE80-\uDE96]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDFCE-\uDFFF]|\uD838[\uDD40-\uDD49\uDEF0-\uDEF9]|\uD83A[\uDCC7-\uDCCF\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D]|\uD83C[\uDD00-\uDD0C])+|(?:(?:[\u0E01-\u0E3A\u0E40-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u1000-\u109F\u1780-\u17DD\u17E0-\u17E9\u17F0-\u17F9\u19E0-\u19FF\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u31F0-\u31FF\u32D0-\u32FE\u3300-\u3357\u3400-\u4DB5\u4E00-\u9FEF\uA9E0-\uA9FE\uAA60-\uAA7F\uF900-\uFA6D\uFA70-\uFAD9\uFF66-\uFF6F\uFF71-\uFF9D]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67]|\uD83C\uDE00|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC7F-\uDC82\uDCB0-\uDCBA\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDE2C-\uDE37\uDE3E\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])*))/,l=/([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)|(\B@[0-9A-Z_a-z]+(?:(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])[0-9A-Z_a-z]+)*)|(&?#(?:\\w)+)/;e.exports=j}),null);
__d("AdsInstagramPollingSticker.react",["cx","AdsInstagramInteractiveComponentConstants","EmojiRenderer","InstagramAdsPreview","React","Style"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("AdsInstagramInteractiveComponentConstants").DEFAULT_OPTION_TEXT_SIZE,i=b("AdsInstagramInteractiveComponentConstants").DEFAULT_POLLING_STICKER_WIDTH;a=b("AdsInstagramInteractiveComponentConstants").FRAME_HEIGHT;var j=b("AdsInstagramInteractiveComponentConstants").FRAME_WIDTH,k=b("AdsInstagramInteractiveComponentConstants").MAX_OPTION_TEXT_LINE_COUNT,l=b("AdsInstagramInteractiveComponentConstants").MAX_OPTION_TEXT_SIZE,m=b("AdsInstagramInteractiveComponentConstants").MIN_OPTION_TEXT_SIZE,n=b("AdsInstagramInteractiveComponentConstants").OPTION_BOX_TEXT_BLOCK_HEIGHT,o=b("AdsInstagramInteractiveComponentConstants").OPTION_BOX_TEXT_BLOCK_WIDTH;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$4=function(a){c.$1=a},c.$5=function(a){c.$2=a},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){var a=this,b=this.props.media;if(b&&b instanceof HTMLElement){var c=function(){a.$3(a.$1),a.$3(a.$2),a.props.onMediaLoaded&&a.props.onMediaLoaded(b.offsetHeight,b.offsetWidth)};b instanceof window.HTMLMediaElement?b.readyState>3?c():b.addEventListener("canplaythrough",c):b instanceof window.HTMLImageElement&&(b.onload=c)}else this.$3(this.$1),this.$3(this.$2)};d.getSnapshotBeforeUpdate=function(){this.$1&&b("Style").set(this.$1,"maxHeight","54px");this.$2&&b("Style").set(this.$2,"maxHeight","54px");return null};d.componentDidUpdate=function(){this.$3(this.$1),this.$3(this.$2)};d.$3=function(a){__p&&__p();if(!a||!a.offsetHeight)return;b("InstagramAdsPreview").setDynamicTextSizeForCaption(a,n-1,o,k,l,m);var c=(n-a.offsetHeight)/2;if(a.offsetHeight>=n){var d=parseInt(window.getComputedStyle(a,null).getPropertyValue("line-height"),10);d=d*k;b("Style").set(a,"maxHeight",d+"px");c=(n-d)/2}b("Style").set(a,"bottom",c+"px")};d.render=function(){__p&&__p();var a,c,d,e,f,g=this.props,k=g.component,l=g.height;g=g.width;a=this.$6((a=k.position_spec)==null?void 0:a.x)*g;c=this.$6((c=k.position_spec)==null?void 0:c.y)*l;d=this.$6((d=k.position_spec)==null?void 0:d.width)*j/i;e=360*this.$6((e=k.position_spec)==null?void 0:e.rotation);e="rotate("+e+"deg) scale("+d+")";d=((d=this.props.component.poll_spec)==null?void 0:d.option_a_text)||"";typeof d==="string"&&(d=d.toUpperCase());f=((f=this.props.component.poll_spec)==null?void 0:f.option_b_text)||"";typeof f==="string"&&(f=f.toUpperCase());return b("React").createElement("div",{className:"_6se2",style:{height:l,width:g,top:c,left:a,transform:e}},b("React").createElement("div",{className:"_6sfb"}),b("React").createElement("div",{className:"_6sfc"}),b("React").createElement("text",{className:"_6sfd",style:{fontFamily:"SFUIText-Heavy"}},(l=k.poll_spec)==null?void 0:l.question_text),b("React").createElement("div",{className:"_6sfe"},b("React").createElement("div",{className:"_6sff",ref:this.$4,style:{fontFamily:"aveny t reg",fontSize:h}},this.$7(d))),b("React").createElement("div",{className:"_6sfg"},b("React").createElement("div",{className:"_6sfh",ref:this.$5,style:{fontFamily:"aveny t reg",fontSize:h}},this.$7(f))))};d.$6=function(a){a=parseFloat(a);return typeof a==="number"?a:0};d.$7=function(a){var c=b("EmojiRenderer").parse(a),d=[],e=0;c.forEach(function(b){e<b.offset&&d.push({isEmoji:!1,text:a.substr(e,b.offset-e)}),d.push({isEmoji:!0,text:b.emoji.join("")}),e=b.offset+b.length});e<a.length&&d.push({isEmoji:!1,text:a.substr(e,a.length-e)});return b("React").createElement("div",null,d.map(function(a,c){return b("React").createElement("span",{className:a.isEmoji?"":"_6-0b",key:c},a.text)}))};return c}(b("React").PureComponent);c.defaultProps={height:a,width:j};e.exports=c}),null);
__d("InteractiveComponentType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({POLL:1})}),null);
__d("AdsInstagramInteractiveComponentList.react",["cx","AdsInstagramInteractiveComponentConstants","AdsInstagramPollingSticker.react","InteractiveComponentType","React","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("AdsInstagramInteractiveComponentConstants").FRAME_HEIGHT,i=b("AdsInstagramInteractiveComponentConstants").FRAME_WIDTH;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={height:h,width:i},c.$1=function(a,b){c.setState({height:a,width:b})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this;if(!this.props.components||this.props.components.size<1)return null;var c=this.props.components.map(function(c,d){return c.type===b("InteractiveComponentType").POLL?b("React").createElement(b("AdsInstagramPollingSticker.react"),{component:c,height:a.state.height,key:d,media:a.props.media,width:a.state.width,onMediaLoaded:a.$1}):null});return b("React").createElement("div",{className:"_6se1",style:{height:this.state.height}},c)};return c}(b("React").PureComponent);e.exports=a}),null);
__d("AdsInstagramStoryPreviewConstants",[],(function(a,b,c,d,e,f){"use strict";e.exports={BOTTOM_MARGIN_BASE:18,BOTTOM_MARGIN_BASE_V2:42,BOTTOM_MARGIN_HAS_CTA:63,BOTTOM_MARGIN_HAS_DISCLAIMER:86,BOTTOM_MARGIN_HAS_CTA_HAS_DISCLAIMER:107,CAPTION_MAX_WIDTH:282,CAROUSEL_DURATION_IN_MS:5e3,CAROUSEL_INITIAL_SPACE:4,CAROUSEL_NON_9_BY_16_MEDIA_HEIGHT:318,CAROUSEL_NON_9_BY_16_DYNAMIC_MEDIA_HEIGHT:342,CAROUSEL_PRE_OPT_IN_VIDEO_MAX_DURATION_IN_MS:15e3,CAROUSEL_SEGMENT_BAR_WIDTH:312,DEFAULT_MEDIA_DURATION_IN_MS:5e3,DYNAMIC_MEDIA_OFFSET_HEIGHT:68,DYNAMIC_MEDIA_OFFSET_HEIGHT_ONE_LINE:50,DYNAMIC_MEDIA_SCALED_OFFSET_HEIGHT:24,DYNAMIC_MEDIA_SCALED_OFFSET_HEIGHT_ONE_LINE:6,FRAME_HEIGHT:565,FRAME_WIDTH:318,HORIZONTAL_MARGIN_CAPTION:48,LINE_HEIGHT:18,MAX_CAPTION_HEIGHT_WITH_FLAT_MEDIA:113,MAX_CAPTION_LINE_COUNT:6,MAX_FONT_SIZE:20,MIN_FONT_SIZE:13,MIN_SPACE:11,PROGRESS_BAR_ANIMATION_DURATION_IN_MS:250,TIMER_UPDATE_INTERVAL_IN_MS:250,TOP_MARGIN:44,UPDATE_TIMEOUT_IN_MS:25,VIDEO_STORY_TRUNCATION_LENGTH_IN_SEC:15,INITIAL_MEDIA_CARD_INDEX:0,OPT_IN_BUTTON_CLICK_ACTION:"OPT_IN_BUTTON_CLICK_ACTION",REPEAT_OPT_IN_FIRST_FRAME_ACTION:"REPEAT_OPT_IN_FIRST_FRAME_ACTION",PLAY_PREV_MEDIA_ACTION:"PLAY_PREV_MEDIA_ACTION",PLAY_NEXT_MEDIA_ACTION:"PLAY_NEXT_MEDIA_ACTION",SCHEDULE_AUTOPLAY:"SCHEDULE_AUTOPLAY"}}),null);
__d("AdsInstagramMultiMediaProgressBar.react",["AdsInstagramStoryPreviewConstants","Event","React","clearInterval","setInterval"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("AdsInstagramStoryPreviewConstants").CAROUSEL_INITIAL_SPACE,h=b("AdsInstagramStoryPreviewConstants").CAROUSEL_SEGMENT_BAR_WIDTH,i=b("AdsInstagramStoryPreviewConstants").DEFAULT_MEDIA_DURATION_IN_MS,j=b("AdsInstagramStoryPreviewConstants").PROGRESS_BAR_ANIMATION_DURATION_IN_MS,k=b("AdsInstagramStoryPreviewConstants").UPDATE_TIMEOUT_IN_MS;a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={progressStartTime:0,animationStartTime:0,progressPercent:0,animationRemainingPercent:0,maxTimeDurationMS:j},c.$4=function(){var a=c.$6(),b=c.$5();c.setState({progressPercent:a,animationRemainingPercent:b})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){this.$1(),this.$2()};d.componentDidUpdate=function(a){this.props.firstFrame!==a.firstFrame&&this.setState({animationStartTime:Date.now(),animationRemainingPercent:100}),(this.props.mediaIndex!==a.mediaIndex||this.props.customMaxPlayDurationInMS!==a.customMaxPlayDurationInMS)&&this.$1(),this.props.mediaIndex!==a.mediaIndex&&this.$2()};d.componentWillUnmount=function(){b("clearInterval")(this.interval)};d.render=function(){__p&&__p();var a=this,c=this.props,d=c.medias,e=c.mediaIndex,f=c.firstFrame,g=c.barClass,h=c.fillClass,i=this.state.progressPercent;return b("React").createElement("div",null,d.map(function(c,j){c=d.length;if(c<1||f===!0&&j>0)return null;c=a.$3(j);var k=c.left;c=c.right;var l=(e-j)*100+i;l>100?l=100:l<0&&(l=0);return b("React").createElement("div",{className:g,key:j,style:{left:k,right:c}},b("React").createElement("div",{className:h,style:{width:l+"%"}}))}))};d.$2=function(){this.setState({progressStartTime:Date.now()}),this.interval&&b("clearInterval")(this.interval),this.interval=b("setInterval")(this.$4,k)};d.$5=function(){var a=Date.now()-this.state.animationStartTime;a=(1-a/j)*100;return Math.max(0,a)};d.$6=function(){var a=this.state,b=a.maxTimeDurationMS;a=a.progressStartTime;var c=this.props,d=c.medias;c=c.mediaIndex;d[c]instanceof HTMLVideoElement?d=d[c].currentTime*1e3:d=(Date.now()-a)%b;return Math.max(0,d/b*100)};d.$1=function(){var a=this,c=this.props.medias[this.props.mediaIndex],d=this.props.customMaxPlayDurationInMS,e=d!=null&&d>0?d:Infinity;c instanceof HTMLVideoElement?c.readyState>=c.HAVE_METADATA?this.setState({maxTimeDurationMS:Math.min(e,c.duration*1e3)}):b("Event").listen(c,"loadedmetadata",function(){a.setState({maxTimeDurationMS:Math.min(e,c.duration*1e3)})}):this.setState({maxTimeDurationMS:Math.min(e,i)})};d.$3=function(a){__p&&__p();var b=this.state.animationRemainingPercent,c=this.props.firstFrame===!0?1:this.props.medias.length,d,e,f=Math.floor(h/c),i=f*c;i=h-i;var j=g+Math.floor(i/2);i=g+Math.ceil(i/2);if(b==0)d=j+f*a,e=i+f*(c-a-1);else{var k=f*((c-1)/c);k=k*(1-b/100);b=f-k;if(a==0)d=j,e=j+k;else{f=j+b;j=c-1;b=a-1;d=f+k/j*b;e=i+k/j*(j-b-1)}}return{left:d,right:e}};return c}(b("React").Component);c.propTypes={barClass:a.string,customMaxPlayDurationInMS:a.number,fillClass:a.string,firstFrame:a.bool,mediaIndex:a.number,medias:a.array.isRequired};e.exports=c}),null);
__d("AdsInstagramStoryProgressBar",["Event","Style","clearTimeout","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=5e3,h=25;a={init:function(a,c,d){__p&&__p();var e,f=Date.now(),i=0,j,k=0,l=function a(){e&&(i=(Date.now()-f+i)%e,f=Date.now(),k=Math.max(0,i/e*100),b("Style").set(c,"width",k+"%")),j=b("setTimeout")(a,h)};if(a instanceof HTMLVideoElement){var m=a;d!=null&&typeof d==="number"&&d>0?e=d*1e3:m.readyState>=m.HAVE_METADATA?e=m.duration*1e3:b("Event").listen(m,"loadedmetadata",function(){e=m.duration*1e3});b("Event").listen(m,"timeupdate",function(){f=Date.now(),i=m.currentTime*1e3})}else e=g;j=b("setTimeout")(l,h);b("Event").listen(a,"DOMNodeRemoved",function(){return b("clearTimeout")(j)})}};e.exports=a}),null);
__d("AdsInstagramPreviewCommonUtils",["cx","fbt","AdsInstagramStoryProgressBar","DOM","DOMContainer.react","Image.react","Locale","React","UnicodeBidi"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function a(){return b("React").createElement(b("Image.react"),{className:"_86t",src:"/images/instagram/ads/preview/story-close.png"})}function c(a){a=b("UnicodeBidi").isDirectionRTL(a);var c=b("Locale").isRTL(),d="";a&&!c?d="rtl":!a&&c&&(d="ltr");return d}function d(a){var c=b("DOM").create("div",{className:a.fillClass});b("AdsInstagramStoryProgressBar").init(a.media,c);c=b("React").createElement(b("DOMContainer.react"),null,c);return b("React").createElement("div",{className:a.barClass}," ",c," ")}function f(a){return b("React").createElement("div",{className:"_6m_u"},b("React").createElement(b("Image.react"),{className:"_6m_v",src:a.profilePicUrl}),b("React").createElement("div",{className:"_6m_w"},a.username),b("React").createElement("div",{className:"_6m_x"},h._("\u0e44\u0e14\u0e49\u0e23\u0e31\u0e1a\u0e01\u0e32\u0e23\u0e2a\u0e19\u0e31\u0e1a\u0e2a\u0e19\u0e38\u0e19")))}e.exports={AdsInstagramCloseButton:a,AdsInstagramGetTextDirection:c,AdsInstagramProgressBar:d,AdsInstagramUserMetadata:f}}),null);
__d("AdsInstagramStoryCarouselPreviewFunctionalComponents",["cx","ix","Image.react","React","XUICarouselArrow.react"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){var c=b("React").createElement(b("XUICarouselArrow.react"),{onClick:a.onClickLeft},b("React").createElement(b("Image.react"),{src:h("101565")}));a=b("React").createElement(b("XUICarouselArrow.react"),{onClick:a.onClickRight},b("React").createElement(b("Image.react"),{src:h("101566")}));return b("React").createElement("div",{className:"_7mt7"},b("React").createElement("div",{className:"_3w7n _fy"},c),b("React").createElement("div",{className:"_3w7n _fx"},a))}e.exports={AdsInstagramStoryCarouselArrows:a}}),null);
__d("AdsInstagramStoryPreviewCarouselVideoTimer.react",["cx","fbt","AdsInstagramStoryPreviewConstants","Event","React","clearInterval","formatDurationSeconds","setInterval"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("AdsInstagramStoryPreviewConstants").CAROUSEL_PRE_OPT_IN_VIDEO_MAX_DURATION_IN_MS,j=b("AdsInstagramStoryPreviewConstants").TIMER_UPDATE_INTERVAL_IN_MS;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={timeLeftInSec:-1},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){var a=this,c=this.props.video;c.readyState>=c.HAVE_METADATA?c.duration*1e3>i?this.interval=b("setInterval")(function(){return a.$1(c.duration)},j):this.setState({timeLeftInSec:-1}):b("Event").listen(c,"loadedmetadata",function(){c.duration*1e3>i?a.interval=b("setInterval")(function(){return a.$1(c.duration)},j):a.setState({timeLeftInSec:-1})})};d.componentWillUnmount=function(){this.interval&&b("clearInterval")(this.interval)};d.$1=function(a){var b=a-this.props.video.currentTime;this.setState(function(a){return{timeLeftInSec:b}})};d.render=function(){return b("React").createElement(b("React").Fragment,null,this.state.timeLeftInSec>=0?b("React").createElement("div",{style:{display:"inline-block"}},b("React").createElement("div",{className:"_6z3t"}),h._("{number of seconds}",[h._param("number of seconds",b("formatDurationSeconds")(Math.ceil(this.state.timeLeftInSec)))])):null)};return c}(b("React").Component);e.exports=a}),null);
__d("InstagramAdPreviewConstants",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({IG_STORY_PREVIEW_CAPTION_BLOCK_ID:"non_9_x_16_story_caption_block",IG_STORY_PREVIEW_CAPTION_FONT_FAMILY:"Tahoma, Helvetica, Arial, sans-serif",IG_STORY_PREVIEW_CAPTION_TEXT_ID:"non_9_x_16_story_caption_text",IG_STORY_PREVIEW_MAIN_ID:"instagram_story_preview_frame",IG_STORY_PREVIEW_MEDIA_ID:"instagram_story_preview_media",IG_STORY_PREVIEW_PAGELET_ID:"instagram_story_preview_pagelet",IG_STORY_PREVIEW_NOT_AVAILABLE:"instagram_story_preview_not_available"})}),null);
__d("AdsInstagramStoryPreviewCaption.react",["cx","fbt","AdsInstagramPreviewCommonUtils","AdsInstagramStoryPreviewConstants","InstagramAdPreviewConstants","InstagramAdsPreview","React","Style","nullthrows","requestAnimationFrame"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("AdsInstagramPreviewCommonUtils").AdsInstagramGetTextDirection,j=b("AdsInstagramStoryPreviewConstants").CAPTION_MAX_WIDTH,k=b("AdsInstagramStoryPreviewConstants").FRAME_WIDTH,l=b("AdsInstagramStoryPreviewConstants").HORIZONTAL_MARGIN_CAPTION,m=b("AdsInstagramStoryPreviewConstants").LINE_HEIGHT,n=b("AdsInstagramStoryPreviewConstants").MAX_CAPTION_LINE_COUNT,o=b("AdsInstagramStoryPreviewConstants").MAX_FONT_SIZE,p=b("AdsInstagramStoryPreviewConstants").MIN_FONT_SIZE,q=b("React").useRef;function a(a){var c,d=q(null),e=q(null);function f(){e.current!=null&&e.current.offsetHeight>0?r(a,d.current,e.current):b("requestAnimationFrame")(f)}b("requestAnimationFrame")(f);return b("React").createElement(b("React").Fragment,null,b("React").createElement("div",{className:"_7o7r",ref:d,style:{fontFamily:b("InstagramAdPreviewConstants").IG_STORY_PREVIEW_CAPTION_FONT_FAMILY,color:(c=a.mediaCard.portalInfo)==null?void 0:c.captionColor}},b("React").createElement("span",{className:"_7o7s",dir:u(a.caption,a.headline),id:b("InstagramAdPreviewConstants").IG_STORY_PREVIEW_CAPTION_TEXT_ID,ref:e,style:{backgroundColor:(c=a.mediaCard.portalInfo)==null?void 0:c.captionBackgroundColor}},t(a))),a.isAutotranslated===!0&&b("React").createElement("div",{className:"_8ckx",style:{color:(c=a.mediaCard.portalInfo)==null?void 0:c.captionColor}},h._("\u0e41\u0e1b\u0e25\u0e42\u0e14\u0e22\u0e2d\u0e31\u0e15\u0e42\u0e19\u0e21\u0e31\u0e15\u0e34")))}function r(a,c,d){__p&&__p();if(c==null||d==null)return;c=b("nullthrows")(c);d=b("nullthrows")(d);var e=Math.min(Math.floor(a.maxAvailableHeight/m),n),f=b("InstagramAdsPreview").truncateCaption(c,15,e,k,d);f||b("InstagramAdsPreview").setDynamicTextSizeForCaption(d,a.maxAvailableHeight,j,e,o,p);f=d.offsetWidth;a=(k-l-f)/2;b("Style").set(c,"left",a+"px");c.id=b("InstagramAdPreviewConstants").IG_STORY_PREVIEW_CAPTION_BLOCK_ID}function s(a,c){var d=[];c!=null&&c!=""&&(d=d.concat(b("InstagramAdsPreview").tokenizeCaption(c)),d=d.concat("\n"));a!=null&&a!=""&&(d=d.concat(b("InstagramAdsPreview").tokenizeCaption(a)));if(d.length===0)return null;c=d.map(function(a,c){var d=a.indexOf("@")===0||a.indexOf("#")===0;return b("React").createElement("span",{className:(d?"_4mix":"")+" _50f0",key:c},a.indexOf("\n")!==-1?b("React").createElement("br",null):a)});return c}function t(a){return b("React").createElement(b("React").Fragment,null,s(a.caption,a.headline),b("React").createElement("span",{className:"_50f0"},b("React").createElement("span",null,h._("..."))," ",b("React").createElement("span",{className:"_66xg"},h._("\u0e2d\u0e37\u0e48\u0e19\u0e46"))))}function u(a,b){if(b!=null&&b!="")return i(b);return a!=null&&a!=""?i(a):""}e.exports=a}),null);
__d("InstagramStoryAdPreviewType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({LONG_VIDEO:"long_video",OPT_IN_CAROUSEL:"opt_in_carousel",DYNAMIC_AD:"dynamic_ad"})}),null);
__d("AdsInstagramStoryPreviewMediaCanvas.react",["cx","AdsInstagramStoryPreviewCaption.react","AdsInstagramStoryPreviewConstants","DOMContainer.react","InstagramStoryAdPreviewType","React","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("AdsInstagramStoryPreviewConstants").BOTTOM_MARGIN_BASE,i=b("AdsInstagramStoryPreviewConstants").BOTTOM_MARGIN_BASE_V2,j=b("AdsInstagramStoryPreviewConstants").BOTTOM_MARGIN_HAS_CTA,k=b("AdsInstagramStoryPreviewConstants").BOTTOM_MARGIN_HAS_CTA_HAS_DISCLAIMER,l=b("AdsInstagramStoryPreviewConstants").BOTTOM_MARGIN_HAS_DISCLAIMER,m=b("AdsInstagramStoryPreviewConstants").DYNAMIC_MEDIA_OFFSET_HEIGHT,n=b("AdsInstagramStoryPreviewConstants").DYNAMIC_MEDIA_OFFSET_HEIGHT_ONE_LINE,o=b("AdsInstagramStoryPreviewConstants").DYNAMIC_MEDIA_SCALED_OFFSET_HEIGHT,p=b("AdsInstagramStoryPreviewConstants").DYNAMIC_MEDIA_SCALED_OFFSET_HEIGHT_ONE_LINE,q=b("AdsInstagramStoryPreviewConstants").FRAME_HEIGHT,r=b("AdsInstagramStoryPreviewConstants").FRAME_WIDTH,s=b("AdsInstagramStoryPreviewConstants").MAX_CAPTION_HEIGHT_WITH_FLAT_MEDIA,t=b("AdsInstagramStoryPreviewConstants").MIN_SPACE,u=b("AdsInstagramStoryPreviewConstants").TOP_MARGIN;function a(a){__p&&__p();var c,d;if(a.mediaCard.portalInfo==null)return b("React").createElement("div",{className:"_7obv"},b("React").createElement(b("DOMContainer.react"),null,a.mediaCard.media));c=b("nullthrows")((c=a.mediaCard.portalInfo)==null?void 0:c.displayHeight);d=b("nullthrows")((d=a.mediaCard.portalInfo)==null?void 0:d.displayWidth);var e=y(a.storyPreviewType,a.mediaCard.headline,a.mediaCard.description),f=d/(c+e.offsetHeight);c=c*r/d+e.scaledOffsetHeight;d=x(a.mediaCard.cta!=null,a.authorizationDisclaimer!=null,c,f);e=a.showHeadlineInCaption&&f>=1?a.headline:void 0;e=(a.caption==null||a.caption=="")&&(!a.showHeadlineInCaption||a.headline==null||a.headline=="")?null:b("React").createElement(b("AdsInstagramStoryPreviewCaption.react"),{caption:a.caption,headline:e,isAutotranslated:a.isAutotranslated,maxAvailableHeight:d,mediaCard:a.mediaCard});if(f>=1||e==null){d=w(a.mediaCard.cta!=null,a.authorizationDisclaimer!=null);return b("React").createElement("div",{className:"_7obw",style:{height:d+"px",top:u+"px"}},b("React").createElement(b("DOMContainer.react"),null,a.mediaCard.media),e)}else{f=w(a.mediaCard.cta!=null,a.authorizationDisclaimer!=null,c);return b("React").createElement(b("React").Fragment,null,b("React").createElement("div",{className:"_7sx_"},b("React").createElement(b("DOMContainer.react"),null,a.mediaCard.media)),b("React").createElement("div",{className:"_7obw",style:{height:f+"px",top:u+t+c+"px"}},e))}}function v(a,b){h;a?a=b?k:j:a=b?l:i;return a}function w(a,b,c){a=v(a,b);return c!=null?q-u-t-c-a:q-u-a}function x(a,b,c,d){a=v(a,b);a=q-u-a;a=a-c-3*t;d>=1&&(a=b?s/2:s);return a}function y(a,c,d){if(a===b("InstagramStoryAdPreviewType").DYNAMIC_AD){if(c!==null&&c!==""&&d!==null&&d!=="")return{offsetHeight:m,scaledOffsetHeight:o};return(c===null||c==="")&&(d===null||d==="")?{offsetHeight:0,scaledOffsetHeight:0}:{offsetHeight:n,scaledOffsetHeight:p}}return{offsetHeight:0,scaledOffsetHeight:0}}a.defaultProps={showHeadlineInCaption:!0};e.exports=a}),null);
__d("AdsInstagramStoryPreviewUtils",["cx","fbt","AdsCallToActionTypes","AdsInstagramStoryPreviewConstants","AdsInstagramStoryProgressBar","CallToActionAppDestination","DOM","DOMContainer.react","React","ShimButton.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("AdsInstagramStoryPreviewConstants").CAROUSEL_INITIAL_SPACE,j=b("AdsInstagramStoryPreviewConstants").CAROUSEL_SEGMENT_BAR_WIDTH;function a(a){if(a.cta==null)return null;var c=a.ctaAppDestination===b("CallToActionAppDestination").MESSENGER||a.cta===b("AdsCallToActionTypes").TYPES.MESSAGE_PAGE.text?b("React").createElement("div",{className:"_88h5"}):null;return b("React").createElement("div",{className:"_4kom"+(a.authorizationDisclaimer?" _4z29":"")},b("React").createElement("div",{className:"_3df2"}),c,a.cta)}function c(a){return a.authorizationDisclaimer==null?null:b("React").createElement("div",{className:"_4z2b"},b("React").createElement("div",{className:"_6mb8"},a.authorizationDisclaimer))}function d(a){__p&&__p();return b("React").createElement("div",null,a.medias.map(function(c,d){__p&&__p();var e=a.medias.length;if(e<1)return null;var f=i+j/e*d;e=i+j/e*(e-d-1);var g;if(d<a.mediaIndex)g=b("React").createElement("div",{className:"_3y9r"});else if(d===a.mediaIndex){var h=b("DOM").create("div",{className:"_3y9t"});b("AdsInstagramStoryProgressBar").init(c,h);g=b("React").createElement(b("DOMContainer.react"),null,h)}else g=b("React").createElement("div",{className:"_3y9t"});return b("React").createElement("div",{className:"_3y97",key:d,style:{left:f,right:e}},g)}))}function f(a){if(!a.isVisible)return null;var c=a.showNumCards?h._("View {Number indicating the number of carousel cards} More",[h._param("Number indicating the number of carousel cards",a.numMediaCards-1)]):h._("\u0e23\u0e31\u0e1a\u0e0a\u0e21\u0e15\u0e48\u0e2d\u0e44\u0e1b");return b("React").createElement(b("ShimButton.react"),{style:{display:"inline-block",pointerEvents:"auto",cursor:"pointer"},onClick:a.onOptIn},b("React").createElement("div",{className:"_6z3t"}),b("React").createElement("div",{className:"_6z3s"}),c)}e.exports={AdsInstagramStoryPreviewCTA:a,AdsInstagramStoryPreviewDisclaimer:c,AdsInstagramStoryPreviewProgressBar:d,AdsInstagramStoryPreviewCarouselOptInButton:f}}),null);
__d("AdsInstagramStoryCarouselAdPreview.react",["cx","fbt","AdsInstagramMultiMediaProgressBar.react","AdsInstagramStoryCarouselPreviewFunctionalComponents","AdsInstagramStoryPreviewCarouselVideoTimer.react","AdsInstagramStoryPreviewConstants","AdsInstagramStoryPreviewMediaCanvas.react","AdsInstagramStoryPreviewUtils","Event","Image.react","InstagramAdPreviewConstants","InstagramStoryAdPreviewType","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("AdsInstagramStoryCarouselPreviewFunctionalComponents").AdsInstagramStoryCarouselArrows,j=b("AdsInstagramStoryPreviewConstants").CAROUSEL_DURATION_IN_MS,k=b("AdsInstagramStoryPreviewConstants").CAROUSEL_PRE_OPT_IN_VIDEO_MAX_DURATION_IN_MS,l=b("AdsInstagramStoryPreviewConstants").INITIAL_MEDIA_CARD_INDEX,m=b("AdsInstagramStoryPreviewConstants").OPT_IN_BUTTON_CLICK_ACTION,n=b("AdsInstagramStoryPreviewConstants").PLAY_NEXT_MEDIA_ACTION,o=b("AdsInstagramStoryPreviewConstants").PLAY_PREV_MEDIA_ACTION,p=b("AdsInstagramStoryPreviewConstants").REPEAT_OPT_IN_FIRST_FRAME_ACTION,q=b("AdsInstagramStoryPreviewConstants").SCHEDULE_AUTOPLAY,r=b("AdsInstagramStoryPreviewUtils").AdsInstagramStoryPreviewCarouselOptInButton,s=b("AdsInstagramStoryPreviewUtils").AdsInstagramStoryPreviewCTA,t=b("AdsInstagramStoryPreviewUtils").AdsInstagramStoryPreviewDisclaimer,u=b("React").useEffect,v=b("React").useReducer,w=1,x=-1,y=0,z=function(a,b,c){return(a+c+b)%b},A=function(a,b,c){if(a instanceof HTMLVideoElement){a=a;return b?Math.min(k,(a.duration-a.currentTime)*1e3):(a.duration-a.currentTime)*1e3}else if(!b){a=Date.now()-c;return j-a}return j},B=function(a){if(a instanceof HTMLVideoElement)return a.duration*1e3;else return j},C=function(a){a instanceof HTMLVideoElement&&(a.currentTime=0,b("Event").listen(a,"canplay",function(){return a.play()}))};function D(a,b){__p&&__p();var c;switch(b.type){case m:window.clearInterval(a.autoplayIntervalID);c=A(b.payload.medias[l],!1,a.firstFrameStartSetTime);return babelHelpers["extends"]({},a,{currentMediaCardIndex:l,isFirstFrame:!1,autoplayInterval:c,autoplayIntervalID:window.setInterval(function(){b.callback()},c)});case p:window.clearInterval(a.autoplayIntervalID);C(b.payload.medias[l]);c=A(b.payload.medias[l],!0,a.firstFrameStartSetTime);return babelHelpers["extends"]({},a,{currentMediaCardIndex:l,autoplayInterval:c,autoplayIntervalID:window.setInterval(function(){b.callback()},c),firstFrameStartSetTime:Date.now()});case o:window.clearInterval(a.autoplayIntervalID);var d=z(a.currentMediaCardIndex,b.payload.medias.length,x),e=b.payload.medias[d];c=B(e);C(e);return babelHelpers["extends"]({},a,{currentMediaCardIndex:d,autoplayInterval:c,autoplayIntervalID:window.setInterval(function(){b.callback()},c)});case n:window.clearInterval(a.autoplayIntervalID);e=z(a.currentMediaCardIndex,b.payload.medias.length,w);d=b.payload.medias[e];c=B(d);C(d);return babelHelpers["extends"]({},a,{currentMediaCardIndex:e,autoplayInterval:c,autoplayIntervalID:window.setInterval(function(){b.callback()},c)});case q:c=B(b.payload.medias[a.currentMediaCardIndex]);return babelHelpers["extends"]({},a,{autoplayInterval:c,autoplayIntervalID:window.setInterval(function(){b.callback()},c)});default:throw new Error()}}function E(a,b){b=a?A(b[l],!0,0):B(b[l]);return{autoplayIntervalID:null,autoplayInterval:b,currentMediaCardIndex:l,isFirstFrame:a,firstFrameStartSetTime:Date.now()}}function a(a){__p&&__p();var c=a.mediaCards.length,d=a.mediaCards.map(function(a){return a.media}),e=a.mediaCards[l].portalInfo!=null,f=a.storyPreviewType===b("InstagramStoryAdPreviewType").DYNAMIC_AD,g=v(D,E(e,d)),j=g[0],A=g[1];g=a.mediaCards[j.currentMediaCardIndex];var B=a.headlines!=null&&a.headlines.length>j.currentMediaCardIndex?a.headlines[j.currentMediaCardIndex]:void 0;u(function(){j.autoplayIntervalID==null&&(j.isFirstFrame?G():F());return function(){window.clearInterval(j.autoplayIntervalID)}});var C=!j.isFirstFrame&&e&&g.media instanceof HTMLVideoElement?b("React").createElement(b("AdsInstagramStoryPreviewCarouselVideoTimer.react"),{key:j.currentMediaCardIndex,video:g.media}):null;c=c>1&&!j.isFirstFrame?b("React").createElement(i,{onClickLeft:H,onClickRight:I}):null;H=j.isFirstFrame?j.autoplayInterval?j.autoplayInterval:k:null;H=b("React").createElement(b("AdsInstagramMultiMediaProgressBar.react"),{barClass:"_3y97",customMaxPlayDurationInMS:H,fillClass:"_3y9t",firstFrame:e&&j.isFirstFrame,mediaIndex:j.currentMediaCardIndex,medias:d});return b("React").createElement("div",{className:"_ogl"},b("React").createElement("div",{className:"_2qhi",id:b("InstagramAdPreviewConstants").IG_STORY_PREVIEW_MAIN_ID,style:g.portalInfo&&{background:"linear-gradient("+g.portalInfo.topColor+", "+g.portalInfo.bottomColor+")"}},c,H,b("React").createElement(b("AdsInstagramStoryPreviewMediaCanvas.react"),{authorizationDisclaimer:a.authorizationDisclaimer,caption:a.caption,headline:B,key:j.currentMediaCardIndex,mediaCard:g,showHeadlineInCaption:!f,storyPreviewType:a.storyPreviewType}),b("React").createElement("div",{className:"_ogm"}),b("React").createElement("div",{className:"_86n"},b("React").createElement(b("Image.react"),{className:"_ogn",src:a.profilePicUrl}),b("React").createElement("div",{className:"_86q"},a.username),b("React").createElement("div",{className:"_4z2a"},h._("\u0e44\u0e14\u0e49\u0e23\u0e31\u0e1a\u0e01\u0e32\u0e23\u0e2a\u0e19\u0e31\u0e1a\u0e2a\u0e19\u0e38\u0e19"),b("React").createElement(r,{isVisible:j.isFirstFrame,numMediaCards:a.mediaCards.length,showNumCards:f,onOptIn:J}),C),b("React").createElement(b("Image.react"),{className:"_86t",src:"/images/instagram/ads/preview/story-close.png"})),b("React").createElement(s,{authorizationDisclaimer:a.authorizationDisclaimer,cta:g.cta,ctaAppDestination:g.ctaAppDestination}),b("React").createElement(t,{authorizationDisclaimer:a.authorizationDisclaimer}),b("React").createElement(b("Image.react"),{className:"_86v"+(a.authorizationDisclaimer?" _4z29":""),src:"/images/instagram/ads/preview/story-ellipsis.png"})));function F(){K(function(){return A({type:q,callback:I,payload:{medias:d}})},y)}function G(){K(function(){return A({type:p,callback:G,payload:{medias:d}})},y)}function H(){K(function(){return A({type:o,callback:I,payload:{medias:d}})},x)}function I(){K(function(){return A({type:n,callback:I,payload:{medias:d}})},w)}function J(){K(function(){return A({type:m,callback:I,payload:{medias:d}})},y)}function K(a,c){c=z(j.currentMediaCardIndex,d.length,c);c=d[c];if(c instanceof HTMLVideoElement&&c.readyState<c.HAVE_METADATA){b("Event").listen(c,"loadedmetadata",function(){a()});return}a()}}e.exports=a}),null);
__d("AdsInstagramStorySingleFormatAdPreview.react",["cx","fbt","AdsInstagramInteractiveComponentList.react","AdsInstagramStoryPreviewConstants","AdsInstagramStoryPreviewMediaCanvas.react","AdsInstagramStoryPreviewUtils","AdsInstagramStoryProgressBar","Image.react","InstagramAdPreviewConstants","InstagramStoryAdPreviewType","React"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("AdsInstagramStoryPreviewUtils").AdsInstagramStoryPreviewCTA,j=b("AdsInstagramStoryPreviewUtils").AdsInstagramStoryPreviewDisclaimer,k=b("React").useEffect,l=b("React").useRef;function a(a){var c=l(null),d=a.storyPreviewType===b("InstagramStoryAdPreviewType").LONG_VIDEO;k(function(){c.current&&b("AdsInstagramStoryProgressBar").init(a.mediaCard.media,c.current,d?b("AdsInstagramStoryPreviewConstants").VIDEO_STORY_TRUNCATION_LENGTH_IN_SEC:null)});return b("React").createElement("div",{className:"_ogl"},b("React").createElement("div",{className:"_2qhi",id:b("InstagramAdPreviewConstants").IG_STORY_PREVIEW_MAIN_ID,style:a.mediaCard.portalInfo&&{background:"linear-gradient("+a.mediaCard.portalInfo.topColor+", "+a.mediaCard.portalInfo.bottomColor+")"}},b("React").createElement(b("AdsInstagramStoryPreviewMediaCanvas.react"),{authorizationDisclaimer:a.authorizationDisclaimer,caption:a.caption,isAutotranslated:a.isAutotranslated,mediaCard:a.mediaCard,storyPreviewType:a.storyPreviewType}),a.mediaCard.interactiveComponents&&b("React").createElement(b("AdsInstagramInteractiveComponentList.react"),{components:a.mediaCard.interactiveComponents,media:a.mediaCard.media}),b("React").createElement("div",{className:"_ogm"}),b("React").createElement("div",{className:"_86n"},b("React").createElement("div",{className:"_86o"},b("React").createElement("div",{className:"_86p",ref:c})),b("React").createElement(b("Image.react"),{className:"_ogn",src:a.profilePicUrl}),b("React").createElement("div",{className:"_86q"},a.username),b("React").createElement("div",{className:"_4z2a"},h._("\u0e44\u0e14\u0e49\u0e23\u0e31\u0e1a\u0e01\u0e32\u0e23\u0e2a\u0e19\u0e31\u0e1a\u0e2a\u0e19\u0e38\u0e19"),a.brandedContentSponsorName!=null&&b("React").createElement("div",{style:{display:"inline"}},b("React").createElement("div",{className:"_82gj"}),h._("\u0e44\u0e14\u0e49\u0e23\u0e31\u0e1a\u0e2a\u0e1b\u0e2d\u0e19\u0e40\u0e0b\u0e2d\u0e23\u0e4c\u0e08\u0e32\u0e01 {=[sponsor name]}",[h._param("=[sponsor name]",b("React").createElement("div",{className:"_843s"},h._("{sponsor name}",[h._param("sponsor name",a.brandedContentSponsorName)])))])),d===!0&&b("React").createElement("div",{style:{display:"inline-block"}},b("React").createElement("div",{className:"_6z3t"}),b("React").createElement("div",{className:"_6z3s"}),h._("\u0e23\u0e31\u0e1a\u0e0a\u0e21\u0e15\u0e48\u0e2d"))),b("React").createElement(b("Image.react"),{className:"_86t",src:"/images/instagram/ads/preview/story-close.png"})),b("React").createElement(i,{authorizationDisclaimer:a.authorizationDisclaimer,cta:a.mediaCard.cta,ctaAppDestination:a.mediaCard.ctaAppDestination}),b("React").createElement(j,{authorizationDisclaimer:a.authorizationDisclaimer}),b("React").createElement(b("Image.react"),{className:"_86v"+(a.authorizationDisclaimer?" _4z29":""),src:"/images/instagram/ads/preview/story-ellipsis.png"})))}e.exports=a}),null);
__d("InstagramAdPreviewAdFormat",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SINGLE_MEDIA:"single_media",CAROUSEL:"carousel",COLLECTION:"collection"})}),null);
__d("AdsInstagramStoryAdPreview.react",["AdsInstagramStoryCarouselAdPreview.react","AdsInstagramStorySingleFormatAdPreview.react","InstagramAdPreviewAdFormat","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){return a.call(this,b)||this}var d=c.prototype;d.render=function(){if(this.props.adFormat===b("InstagramAdPreviewAdFormat").SINGLE_MEDIA)return b("React").createElement(b("AdsInstagramStorySingleFormatAdPreview.react"),this.props);else if(this.props.adFormat===b("InstagramAdPreviewAdFormat").CAROUSEL)return b("React").createElement(b("AdsInstagramStoryCarouselAdPreview.react"),this.props);return b("React").createElement("div",null)};return c}(b("React").PureComponent);e.exports=a}),null);
__d("SubRipText",[],(function(a,b,c,d,e,f){__p&&__p();var g={size:"90%"};function h(a){__p&&__p();var b=Number(a.substr(0,a.length-1)),c=a.substr(-1);switch(c){case"s":return b;case"m":return b*60;case"h":return b*3600}c=a.split(":");b=Number(c[c.length-1].replace(/,/,"."));c.length>1&&(b+=Number(c[c.length-2])*60);c.length>2&&(b+=Number(c[c.length-3])*3600);return b}function i(a){__p&&__p();a=a.split(/\r\n|\r|\n/).map(function(a){return a.trim()});var b=[],c=0;do{var d=a.indexOf("",c);d<0&&(d=a.length);var e=k(a.slice(c,d));e&&b.push(e);c=d+1}while(c>0&&c<a.length);return b}function j(a){a=a.split("-->");if(a.length!=2)return null;var b=h(a[0].trim());a=h(a[1].trim());return Number.isNaN(a)||Number.isNaN(b)?null:{begin:b,end:a}}function k(a){if(a.length<3)return null;var b=l(a[0]),c=j(a[1]);return!c?null:{counter:b,begin:c.begin,end:c.end,text:a.slice(2,6)}}function l(a){return Number(a.trim())}function m(a){a=a.split(".");return a[0].length<2?"0"+a.join("."):a.join(".")}function n(a){var b=m(Math.floor(a/3600).toString()),c=m(Math.floor(a%3600/60).toString());a=m((a%60).toFixed(3));return b+":"+c+":"+a}function o(a,b,c){var d="";if(c)for(var e in c)d+=" "+e+":"+c[e];return n(a)+" --> "+n(b)+d}function p(a,b){return a.counter+"\n"+o(a.begin,a.end,b)+"\n"+a.text.join("\n")+"\n"}function q(a,b){return"WEBVTT\n\n"+a.map(function(a){return p(a,b)}).join("\n")}a=function(){"use strict";__p&&__p();function a(a){var b=this;this.$1=i(a);this.$1.sort(function(a,b){return a.counter-b.counter});this.$2=this.$1.map(function(a,b){return b}).sort(function(a,c){return b.$1[a].begin-b.$1[c].begin});this.invalidateCache();this.$6=g}var b=a.prototype;b.$7=function(a){return this.$1[this.$2[a]]};b.$8=function(a){var b=this.$3;while(b<this.$2.length){var c=this.$7(b);if(c.begin<=a)this.$4.push(c),b++;else break}this.$3=b};b.$9=function(a){this.$4=this.$4.filter(function(b){return b.end>a})};b.invalidateCache=function(){this.$5=0,this.$4=[],this.$3=0};b.setStyle=function(a){this.$6=a};b.getSubtitles=function(a){a<this.$5&&this.invalidateCache();this.$5=a;this.$8(a);this.$9(a);return this.$4.reduce(function(a,b){return a.concat(b.text)},[])};b.renderVTT=function(){return q(this.$1,this.$6)};return a}();e.exports=a}),null);
__d("IGVideoSubtitles",["DOM","EventListener","SubRipText","XHRRequest","getCrossOriginTransport"],(function(a,b,c,d,e,f){__p&&__p();var g=a.URL||a.webkitURL;c=function(){"use strict";__p&&__p();function a(a,b,c){this.$1=a,this.$2=this.showSubtitles.bind(this,c),this.$3(b)}var c=a.prototype;c.$4=function(a){a=new(b("SubRipText"))(a);a=new Blob([a.renderVTT()],{type:"text/vtt"});return g.createObjectURL(a)};c.$3=function(a){var c=this;if(!g)return;new(b("XHRRequest"))(a).setTransportBuilder(b("getCrossOriginTransport")).setMethod("GET").setResponseHandler(function(a){c.$5(c.$4(a))}).send()};c.$5=function(a){var c=this;a=b("DOM").create("track",{kind:"captions",src:a});b("EventListener").listen(a,"load",function(){c.$2()});b("DOM").appendContent(this.$1,a);this.hideSubtitles()};c.showSubtitles=function(a){Array.prototype.forEach.call(this.$1.textTracks,function(b){b.mode="showing",a&&Array.prototype.forEach.call(b.cues,function(b){return b.line=a})})};c.hideSubtitles=function(){Array.prototype.forEach.call(this.$1.textTracks,function(a){return a.mode="hidden"})};c.setOnSubtitlesReady=function(a){this.$2=a};a.load=function(b,c,d){return new a(b,c,d)};return a}();e.exports=c}),null);
__d("InstagramVideo",["EventListener","IGVideoSubtitles","LitestandStoryInsertionStatus","Run","URI","isCdnURI","throttle"],(function(a,b,c,d,e,f){__p&&__p();var g=1e3/15;a={init:function(a,c,d){__p&&__p();var e=a;e.loop=d.loop;e.muted=d.playMuted!=null?d.playMuted:!0;e.controls=!d.disableVideoControls;d.playStartSec!==null&&d.playEndSec!==null&&d.playMuted!==null&&(e.oncontextmenu=function(){return!d.disableVideoControls});e.setAttribute("webkit-playsinline","");e.setAttribute("playsinline","");h(e,d);e.play();this.setSubtitles(e,d.subtitlesSrc,d.subtitleOffset);c=b("LitestandStoryInsertionStatus").registerBlocker(function(){return!e.paused&&!e.ended});b("Run").onLeave(c.unsubscribe.bind(c))},setSubtitles:function(a,c,d){c&&b("isCdnURI")(new(b("URI"))(c))&&b("IGVideoSubtitles").load(a,c,d)}};function h(a,c){c.playStartSec&&c.playStartSec>0&&b("EventListener").listen(a,"loadedmetadata",i(a,c)),!c.loop&&c.playEndSec!=null&&b("EventListener").listen(a,"timeupdate",b("throttle").withBlocking(j.bind(null,a,c),g)),c.loop&&(c.playStartSec||c.playEndSec)&&b("EventListener").listen(a,"timeupdate",b("throttle").withBlocking(k.bind(null,a,c),g))}function i(a,b){b.playStartSec>0&&(a.currentTime=b.playStartSec)}function j(a,b,c){a.currentTime>b.playEndSec&&!b.loop&&a.pause()}function k(a,b,c){(b.playEndSec&&a.currentTime>b.playEndSec||b.playStartSec&&a.currentTime==0)&&(a.currentTime=b.playStartSec)}e.exports=a}),null);